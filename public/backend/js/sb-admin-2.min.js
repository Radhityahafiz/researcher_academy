/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!function(l){"use strict";l("#sidebarToggle, #sidebarToggleTop").on("click",function(e){l("body").toggleClass("sidebar-toggled"),l(".sidebar").toggleClass("toggled"),l(".sidebar").hasClass("toggled")&&l(".sidebar .collapse").collapse("hide")}),l(window).resize(function(){l(window).width()<768&&l(".sidebar .collapse").collapse("hide"),l(window).width()<480&&!l(".sidebar").hasClass("toggled")&&(l("body").addClass("sidebar-toggled"),l(".sidebar").addClass("toggled"),l(".sidebar .collapse").collapse("hide"))}),l("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){var o;768<l(window).width()&&(o=(o=e.originalEvent).wheelDelta||-o.detail,this.scrollTop+=30*(o<0?1:-1),e.preventDefault())}),l(document).on("scroll",function(){100<l(this).scrollTop()?l(".scroll-to-top").fadeIn():l(".scroll-to-top").fadeOut()}),l(document).on("click","a.scroll-to-top",function(e){var o=l(this);l("html, body").stop().animate({scrollTop:l(o.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()})}(jQuery);

document.addEventListener('DOMContentLoaded', function() {
    // Buat overlay
    const overlay = document.createElement('div');
    overlay.className = 'mobile-overlay';
    document.body.appendChild(overlay);
    
    const sidebar = document.getElementById('accordionSidebar');
    const toggleBtn = document.getElementById('sidebarToggleTop');
    
    if (toggleBtn && sidebar) {
        toggleBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            if (window.innerWidth <= 768) {
                // Toggle sidebar
                sidebar.classList.toggle('show-mobile');
                overlay.classList.toggle('show');
                document.body.classList.toggle('sidebar-toggled');
            }
        });
        
        // Tutup sidebar ketika overlay diklik
        overlay.addEventListener('click', function() {
            sidebar.classList.remove('show-mobile');
            overlay.classList.remove('show');
            document.body.classList.remove('sidebar-toggled');
        });
        
        // Tutup sidebar ketika link diklik di mobile
        const links = sidebar.querySelectorAll('.nav-link');
        links.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('show-mobile');
                    overlay.classList.remove('show');
                    document.body.classList.remove('sidebar-toggled');
                }
            });
        });
        
        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                sidebar.classList.remove('show-mobile');
                overlay.classList.remove('show');
                document.body.classList.remove('sidebar-toggled');
            }
        });
    }
});

/*--------------------------------------------------------------
# Create/edit materi
--------------------------------------------------------------*/
document.addEventListener('DOMContentLoaded', function() {
        const contentTypeSelect = document.getElementById('content_type');
        const fileUploadField = document.getElementById('file_upload_field');
        const externalLinkField = document.getElementById('external_link_field');
        const textContentField = document.getElementById('text_content_field');

        function toggleFields() {
            const type = contentTypeSelect.value;
            
            fileUploadField.style.display = 'none';
            externalLinkField.style.display = 'none';
            textContentField.style.display = 'none';
            
            if (type === 'file') {
                fileUploadField.style.display = 'block';
            } else if (type === 'link') {
                externalLinkField.style.display = 'block';
            } else if (type === 'text') {
                textContentField.style.display = 'block';
            }
        }

        // Initialize based on previous selection if there's an error
        if ("{{ old('content_type') }}" !== "") {
            toggleFields();
        }

        // Event listener for changes
        contentTypeSelect.addEventListener('change', toggleFields);
    });

/*--------------------------------------------------------------
# Create/edit assignment
--------------------------------------------------------------*/
  // Update file input label
    document.querySelector('.custom-file-input').addEventListener('change', function(e) {
        var fileName = document.getElementById("file").files[0].name;
        var nextSibling = e.target.nextElementSibling;
        nextSibling.innerText = fileName;
    });